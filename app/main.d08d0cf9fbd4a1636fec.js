(()=>{"use strict";var e="todos";function t(){var t=sessionStorage.getItem(e);return t?JSON.parse(t):[]}function o(){var e=document.querySelector(".todo-select-wrapper"),o=document.querySelector(".todo-select");console.log(t().length),t().length>0?(e.classList.remove("todo-select-wrapper_disabled"),e.classList.remove("todo-select-wrapper_disabled::after"),o.classList.remove("select_disabled")):(e.classList.add("todo-select-wrapper_disabled"),e.classList.add("todo-select-wrapper_disabled::after"),o.classList.add("select_disabled"))}var s=function(s){var n=document.createElement("li");n.classList.add("todo-item");var d=document.createElement("span");d.innerText=s,d.classList.add("todo-text"),n.appendChild(d);var a=document.createElement("button");a.innerHTML='<i class="fas fa-check"></i>',a.classList.add("todo-check-button"),a.addEventListener("click",function(e){return function(t){t.preventDefault(),e.classList.toggle("todo-item_completed")}}(n)),n.appendChild(a);var i=document.createElement("button");return i.innerHTML='<i class="fas fa-trash"></i>',i.classList.add("todo-remove-button"),i.addEventListener("click",function(s){return function(n){n.preventDefault(),s.classList.add("todo-item_fall"),s.addEventListener("transitionend",(function(){!function(o){var s=t(),n=Array.from(o.childNodes).find((function(e){return e.classList.contains("todo-text")}));if(n){var d=s.filter((function(e){return e!==n.innerText}));sessionStorage.setItem(e,JSON.stringify(d))}}(s),s.remove(),o()}))}}(n)),n.appendChild(i),n};function n(){return{todoInput:document.querySelector(".todo-input"),todoHelper:document.querySelector(".todo-helper"),todoButton:document.querySelector(".todo-button")}}function d(){var e=n(),t=e.todoInput,o=e.todoHelper,s=e.todoButton;s.classList.add("todo-button_disabled"),t.addEventListener("keypress",(function(e){13===e.keyCode&&t.value.length<3&&e.preventDefault()})),t.addEventListener("input",(function(){t.value.length>=3?(s.classList.remove("todo-button_disabled"),o.classList.remove("todo-helper_visible")):(s.classList.add("todo-button_disabled"),o.classList.add("todo-helper_visible"))})),t.addEventListener("focus",(function(){o.classList.add("todo-helper_visible")})),t.addEventListener("blur",(function(){o.classList.remove("todo-helper_visible")}))}var a=n(),i=a.todoInput,l=a.todoButton,r=document.querySelector(".todo-list"),c=document.querySelector(".todo-select");document.addEventListener("DOMContentLoaded",(function(){t().forEach((function(e){var t=s(e);r.appendChild(t)})),d(),o()})),i.addEventListener("input",d),l.addEventListener("click",(function(d){var a,l;d.preventDefault(),a=i.value,(l=t()).push(a),sessionStorage.setItem(e,JSON.stringify(l));var c=s(i.value);r.appendChild(c),function(){var e=n(),t=e.todoInput,o=e.todoHelper,s=e.todoButton;t.value="",s.classList.add("todo-button_disabled"),o.classList.add("todo-helper_visible")}(),o(),n().todoHelper.classList.remove("todo-helper_visible")})),c.addEventListener("change",(function(e){var t,o;t=r.childNodes,o=e.target.value,t.length&&t.forEach((function(e){switch(o){case"completed":e.classList.contains("todo-item_completed")?e.style.display="flex":e.style.display="none";break;case"uncompleted":e.classList.contains("todo-item_completed")?e.style.display="none":e.style.display="flex";break;default:return void(e.style.display="flex")}}))}))})();