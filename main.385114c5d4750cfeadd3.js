(()=>{"use strict";var e="todos";function t(){var t=sessionStorage.getItem(e);return t?JSON.parse(t):[]}function o(){var e=document.querySelector(".todo-select-wrapper"),o=document.querySelector(".todo-select");t().length>0?(e.classList.remove("todo-select-wrapper_disabled"),e.classList.remove("todo-select-wrapper_disabled::after"),o.classList.remove("select_disabled")):(e.classList.add("todo-select-wrapper_disabled"),e.classList.add("todo-select-wrapper_disabled::after"),o.classList.add("select_disabled"))}var s=function(s,n){var d=document.createElement("li");d.classList.add("todo-item"),n&&d.classList.add("todo-item_completed");var a=document.createElement("span");a.innerText=s,a.classList.add("todo-text"),d.appendChild(a);var i=document.createElement("button");i.innerHTML='<i class="fas fa-check"></i>',i.classList.add("todo-check-button"),i.addEventListener("click",function(o){return function(s){s.preventDefault(),o.classList.toggle("todo-item_completed");var n=o.classList.contains("todo-item_completed");o.addEventListener("click",(function(){!function(o,s){var n=t(),d=Array.from(o.childNodes).find((function(e){return e.classList.contains("todo-text")}));if(d){for(var a in n)n[a].value===d.innerText&&(n[a].status=s);sessionStorage.setItem(e,JSON.stringify(n))}}(o,n)}))}}(d)),d.appendChild(i);var r=document.createElement("button");return r.innerHTML='<i class="fas fa-trash"></i>',r.classList.add("todo-remove-button"),r.addEventListener("click",function(s){return function(n){n.preventDefault(),s.classList.add("todo-item_fall"),s.addEventListener("transitionend",(function(){!function(o){var s=t(),n=Array.from(o.childNodes).find((function(e){return e.classList.contains("todo-text")}));if(n){var d=s.filter((function(e){return e.value!==n.innerText}));sessionStorage.setItem(e,JSON.stringify(d))}}(s),s.remove(),o()}))}}(d)),d.appendChild(r),d};function n(){return{todoInput:document.querySelector(".todo-input"),todoHelper:document.querySelector(".todo-helper"),todoButton:document.querySelector(".todo-button")}}function d(){var e=n(),t=e.todoInput,o=e.todoHelper,s=e.todoButton;s.classList.add("todo-button_disabled"),t.addEventListener("keypress",(function(e){13===e.keyCode&&t.value.length<3&&e.preventDefault()})),t.addEventListener("input",(function(){t.value.length>=3?(s.classList.remove("todo-button_disabled"),o.classList.remove("todo-helper_visible")):(s.classList.add("todo-button_disabled"),o.classList.add("todo-helper_visible"))})),t.addEventListener("focus",(function(){o.classList.add("todo-helper_visible")})),t.addEventListener("blur",(function(){o.classList.remove("todo-helper_visible")}))}var a=n(),i=a.todoInput,r=a.todoButton,l=document.querySelector(".todo-list"),c=document.querySelector(".todo-select");document.addEventListener("DOMContentLoaded",(function(){(function(){var e=t();for(var o in e){var n=s(e[o].value,e[o].status);l.appendChild(n)}})(),d(),o()})),i.addEventListener("input",d),r.addEventListener("click",(function(d){var a,r;d.preventDefault(),a=i.value,(r=t()).push({value:a,status:!1}),sessionStorage.setItem(e,JSON.stringify(r));var c=s(i.value);l.appendChild(c),function(){var e=n(),t=e.todoInput,o=e.todoHelper,s=e.todoButton;t.value="",s.classList.add("todo-button_disabled"),o.classList.add("todo-helper_visible")}(),o(),n().todoHelper.classList.remove("todo-helper_visible")})),c.addEventListener("change",(function(e){var t,o;t=l.childNodes,o=e.target.value,t.length&&t.forEach((function(e){switch(o){case"completed":e.classList.contains("todo-item_completed")?e.style.display="flex":e.style.display="none";break;case"uncompleted":e.classList.contains("todo-item_completed")?e.style.display="none":e.style.display="flex";break;default:return void(e.style.display="flex")}}))}))})();